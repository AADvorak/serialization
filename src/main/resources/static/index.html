<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Deserialization</title>
</head>
<body>
<script src="deserializer/deserializer-base.js"></script>
<script src="deserializer/primitives-deserializer.js"></script>
<script src="deserializer/person-deserializer.js"></script>
<script src="deserializer/embedded-list-deserializer.js"></script>
<script src="deserializer/embedded-string-map-deserializer.js"></script>
<script src="deserializer/embedded-integer-map-deserializer.js"></script>
<script src="api/api.js"></script>
<script>
  const loadPrimitives = async () => {
    const input = await Api.getInput('/api/test/primitives')
    const primitives = PrimitivesDeserializer.deserialize(input)
    document.getElementById('primitives').innerText = JSON.stringify(primitives)
  }

  const loadPerson = async () => {
    const input = await Api.getInput('/api/test/person')
    const person = PersonDeserializer.deserialize(input)
    document.getElementById('person').innerText = JSON.stringify(person)
  }

  const loadEmbeddedList = async () => {
    const input = await Api.getInput('/api/test/embedded-list')
    const list = EmbeddedListDeserializer.deserialize(input)
    document.getElementById('list').innerText = JSON.stringify(list)
  }

  const loadEmbeddedStringMap = async () => {
    const input = await Api.getInput('/api/test/embedded-string-map')
    const map = EmbeddedStringMapDeserializer.deserialize(input)
    document.getElementById('string-map').innerText = JSON.stringify(map)
  }

  const loadEmbeddedIntegerMap = async () => {
    const input = await Api.getInput('/api/test/embedded-integer-map')
    const map = EmbeddedIntegerMapDeserializer.deserialize(input)
    document.getElementById('integer-map').innerText = JSON.stringify(map)
  }

  loadPrimitives().then()
  loadPerson().then()
  loadEmbeddedList().then()
  loadEmbeddedStringMap().then()
  loadEmbeddedIntegerMap().then()
</script>
<h3>Primitives: <span id="primitives"></span></h3>
<h3>Person: <span id="person"></span></h3>
<h3>List: <span id="list"></span></h3>
<h3>String map: <span id="string-map"></span></h3>
<h3>Integer map: <span id="integer-map"></span></h3>
</body>
</html>
